(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{301:function(n,e,t){"use strict";t.d(e,"d",(function(){return j})),t.d(e,"e",(function(){return m})),t.d(e,"c",(function(){return f})),t.d(e,"f",(function(){return x})),t.d(e,"a",(function(){return O})),t.d(e,"b",(function(){return h}));var a=t(23),r=t(36),o=t(305),c=t(311),i=t.n(c),s=t(62),d=t(312),l=t(313),u=Object(d.a)({apiKey:"AIzaSyA3VHRbj4knFBXK3YVFdsr7xn2MvE1A0_E",authDomain:"hotel-booking-app-2c070.firebaseapp.com",projectId:"hotel-booking-app-2c070",storageBucket:"hotel-booking-app-2c070.appspot.com",messagingSenderId:"308536271440",appId:"1:308536271440:web:cf389c892a5fa653486755"}),b=Object(l.a)(u),p=t(349),j=function(n){return i()(n).format("DD/MM/YYYY")},m=function(n){return i()(n).format("Do MMMM, YYYY")},f=function(n){var e=i()(),t=i()(n).format("YYYY");return e.diff(t,"years")},x=function(){var n=Object(r.a)(Object(a.a)().mark((function n(e,t){var c,i,d;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return alert("No file found."),n.abrupt("return");case 3:return c=Object(o.d)(b,t),(i=Object(o.e)(c,e)).on("state_changed",(function(n){}),(function(n){s.b.error(n,{autoClose:5500,pauseOnHover:!0})}),(function(){d=Object(o.b)(i.snapshot.ref)})),n.next=8,Promise.resolve(i).then(function(){var n=Object(r.a)(Object(a.a)().mark((function n(e){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve(d).then((function(n){return n}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),O=function(){var n=Object(r.a)(Object(a.a)().mark((function n(e,t){var o;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&0!==e.length){n.next=3;break}return alert("No file found."),n.abrupt("return");case 3:return o=[],n.next=6,Promise.all(e.map(function(){var n=Object(r.a)(Object(a.a)().mark((function n(e,r){var c,i,s;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=Object(p.a)(),i="images/rooms/".concat(t.id,"/roomImage-").concat(c),n.next=4,x(e,i);case 4:s=n.sent,o.push({url:s,uuid:c});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 6:return n.abrupt("return",o);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),h=function(){var n=Object(r.a)(Object(a.a)().mark((function n(e,t){return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(e.map(function(){var n=Object(r.a)(Object(a.a)().mark((function n(e,r){var c,i;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.uuid,i=Object(o.d)(b,"images/rooms/".concat(t,"/roomImage-").concat(c)),n.next=4,Object(o.a)(i);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},302:function(n,e,t){"use strict";t.d(e,"e",(function(){return b})),t.d(e,"d",(function(){return p})),t.d(e,"f",(function(){return j})),t.d(e,"g",(function(){return m})),t.d(e,"c",(function(){return f})),t.d(e,"a",(function(){return x})),t.d(e,"b",(function(){return O}));var a,r,o,c,i,s,d,l=t(12),u=t(18),b=u.a.div(a||(a=Object(l.a)(["\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: #000000d1;\n    z-index: 9999999\n"]))),p=u.a.div(r||(r=Object(l.a)([";\n    width: 700px;\n    max-height: 80vh;\n    overflow-y: scroll;\n    background: #fff;\n    padding: 20px;\n    border-radius: 6px;\n    position: relative;\n    .close-icon{\n        position: absolute;\n        top: 20px;\n        right: 20px;\n        cursor: pointer\n    }\n    @media(max-width: 700px){\n        width: calc(100vw - 40px);\n    }\n"]))),j=u.a.h3(o||(o=Object(l.a)(["\n    font-weight: 26px;\n    font-weight: 600;\n    margin-bottom: 20px\n"]))),m=u.a.div(c||(c=Object(l.a)(["\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));\n    justify-content: center;\n    row-gap: 16px;\n    column-gap: 16px;\n    div{\n        width: 40px;\n        height: 40px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border: 1px solid red;\n        cursor: pointer;\n        border-radius: 4px;\n    }\n    .assigned{\n        background: #ffadad\n    }\n    .selected{\n        background: #8dffd0;\n        border-color: green\n    }\n"]))),f=u.a.div(i||(i=Object(l.a)(["\n    margin-bottom: 20px;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    grid-gap: 16px;\n"]))),x=u.a.div(s||(s=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    border-radius: 4px;\n    background: #ffcdb8;\n    height: 160px;\n    .plus-icon{\n        color: #9a9a9a !important;\n        font-size: 40px !important;\n    }\n"]))),O=u.a.div(d||(d=Object(l.a)(["\n    display: flex;\n    justify-content: space-between\n"])))},303:function(n,e,t){},304:function(n,e,t){"use strict";var a=t(135);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(t(136)),o=t(1),c=(0,r.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");e.default=c},306:function(n,e,t){"use strict";t.d(e,"b",(function(){return s})),t.d(e,"a",(function(){return d}));var a,r,o,c=t(12),i=t(60),s=Object(i.a)(a||(a=Object(c.a)(["\nquery($id: ID!){\n    getUserBookings(id: $id){\n        id\n        from\n        to\n        days\n        paid\n        amount\n        bookedOn\n        people{\n            children\n            adults\n        }\n        roomNumbers\n        numOfPeople\n        location\n        bookedBy{\n            name\n            email\n            username\n            id\n        }\n        hotel{\n            id\n            name\n            location\n        }\n        room{\n            id\n            name\n            price\n            others\n        }\n    }\n}\n"]))),d=Object(i.a)(r||(r=Object(c.a)(["\nquery($id: ID!){\n    getHotelBookings(id: $id){\n        id\n        from\n        to\n        days\n        paid\n        amount\n        bookedOn\n        people{\n            children\n            adults\n        }\n        roomNumbers\n        numOfPeople\n        location\n        bookedBy{\n            name\n            email\n            username\n            id\n        }\n        hotel{\n            id\n            name\n            location\n        }\n        room{\n            id\n            name\n            price\n            others\n        }\n    }\n}\n"])));Object(i.a)(o||(o=Object(c.a)(["\n    query($id: ID!){\n        getBooking(id: id){\n            id\n        from\n        to\n        days\n        paid\n        amount\n        bookedOn\n        people{\n            children\n            adults\n        }\n        roomNumbers\n        numOfPeople\n        location\n        bookedBy{\n            name\n            email\n            username\n            id\n        }\n        hotel{\n            id\n            name\n            location\n        }\n        room{\n            id\n            name\n            price\n            others\n        }\n        }\n    }\n"])))},308:function(n,e,t){"use strict";t.d(e,"c",(function(){return d})),t.d(e,"d",(function(){return l})),t.d(e,"b",(function(){return u})),t.d(e,"a",(function(){return b}));var a,r,o,c,i=t(12),s=t(18),d=s.a.div(a||(a=Object(i.a)(["\n  height: 58px;\n  border: 1px solid #d2d2d2;\n  padding: 8px 10px;\n  display: grid;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 6px;\n  margin-bottom: 10px;\n\n  &.normal-col{\n    @media(max-width: 700px) {\n      display: none;\n    }\n  }\n\n  &.responsive-col{\n    display: none;\n    grid-template-columns: 0.5fr 1fr !important;\n\n    @media(max-width: 700px) {\n      display: grid;\n    }\n  }\n\n  \n"]))),l=s.a.p(r||(r=Object(i.a)(["\n  margin: 0 !important;\n  text-align: center;\n  width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  cursor: pointer;\n  :first-child{\n    text-align: left;\n  }\n  p{\n    width: fit-content;\n    margin: 0\n  }\n"]))),u=s.a.button(o||(o=Object(i.a)(["\n  width: 40px;\n  height: 40px;\n  padding: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #d2d2d2;\n  border-radius: 4px !important;\n  outline: 0;\n  margin: 0 6px !important;\n  background: transparent;\n  cursor: pointer\n"]))),b=s.a.div(c||(c=Object(i.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])))},309:function(n,e,t){"use strict";t.d(e,"a",(function(){return i})),t.d(e,"b",(function(){return s}));var a,r,o=t(12),c=t(60),i=Object(c.a)(a||(a=Object(o.a)(["\nmutation($from: Date!, $to: Date!, $roomNumbers: [Int]!, $paid: Boolean!, $amount: Int!,\n    $bookedBy: ID!, $people: people!, $room: ID!, $hotel: ID!){\n    addBooking(from: $from, to: $to, roomNumbers: $roomNumbers, paid: $paid, amount: $amount, \n        bookedBy: $bookedBy, people: $people, room: $room, hotel: $hotel){\n      id\n      from\n      to\n      bookedBy{\n          name\n      }\n    }\n  }\n"]))),s=Object(c.a)(r||(r=Object(o.a)(["\nmutation($id: ID!){\n    cancelBooking(id: $id){\n      id\n      from\n      to\n      bookedBy{\n          name\n      }\n    }\n  }\n"])))},310:function(n,e,t){"use strict";t(0),t(317);var a=t(32),r=t(1);e.a=function(n){return Object(r.jsx)("div",{className:"search-bar",children:Object(r.jsx)(a.c,{placeholder:n.placeholder,value:n.query,onChange:function(e){return n.setQuery(e.target.value)}})})}},317:function(n,e,t){},319:function(n,e,t){"use strict";var a=t(135);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(t(136)),o=t(1),c=(0,r.default)((0,o.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");e.default=c},320:function(n,e,t){"use strict";var a=t(135);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(t(136)),o=t(1),c=(0,r.default)([(0,o.jsx)("path",{d:"M15 2h-3.5l-1-1h-5l-1 1H1v2h14zm1 7c-.7 0-1.37.1-2 .29V5H2v12c0 1.1.9 2 2 2h5.68c1.12 2.36 3.53 4 6.32 4 3.87 0 7-3.13 7-7s-3.13-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"0"),(0,o.jsx)("path",{d:"M16.5 12H15v5l3.6 2.1.8-1.2-2.9-1.7z"},"1")],"AutoDelete");e.default=c},328:function(n,e,t){"use strict";t.r(e);var a,r,o=t(17),c=t(0),i=t(20),s=t(12),d=t(18),l=t(310),u=t(106),b=t(292),p=t(62),j=t(308),m=t(309),f=t(306),x=t(301),O=t(320),h=t.n(O),g=t(319),y=t.n(g),v=t(1),k=d.a.div(a||(a=Object(s.a)(["\n    background: white;\n    box-shadow: 2px 3px 7px 0px #66666682;\n    padding: 14px;\n    border-radius: 6px;\n    max-width: 100%;\n\n    .details {\n        margin-top: 16px;\n        \n        p {\n            text-align: start;\n            font-size: 14px;\n            color: grey\n        }\n    }\n\n    .payment-status {\n        padding: 6px;\n        border-radius: 4px;\n        background: #f16d59;\n        text-align: start;\n        font-size: 14px;\n        width: fit-content;\n        margin-top: 6px !important;\n        color: #fff;\n\n        &.paid{\n            background: #5fffc5;\n            color: #008d5a\n        }\n    }\n    \n    \n"]))),w=function(n){var e=n.data,t=e.hotel,a=e.room,r=e.from,c=e.to,i=e.bookedOn,s=e.amount,d=e.paid,l=Object(b.a)(m.b),u=Object(o.a)(l,1)[0];return Object(v.jsxs)(k,{children:[Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)(j.d,{style:{fontSize:"20px",fontWeight:"bold"},children:[t.location,", ",t.name]}),Object(v.jsx)(j.d,{className:"payment-status ".concat(d?"paid":""),children:d?"Paid":"Not Paid"})]}),Object(v.jsxs)(j.a,{style:{justifyContent:"flex-end"},children:[Object(v.jsx)(j.b,{style:{background:"#ff6e29"},onClick:function(){return n.setModal({state:!0,param:n.data,title:"Booking Details"})},children:Object(v.jsx)(y.a,{style:{color:"#fff"}})}),!n.isOld&&Object(v.jsx)(j.b,{style:{background:"#ff6e29"},onClick:function(){n.setLoading(!0),u({variables:{id:n.data.id},refetchQueries:[f.b,{variables:{id:n.data.bookedBy.id}}]}).then((function(e){n.setLoading(!1),p.b.success("Canceled booking.",{autoClose:5500,pauseOnHover:!0})})).catch((function(e){n.setLoading(!1),p.b.error(e.message,{autoClose:5500,pauseOnHover:!0})}))},children:Object(v.jsx)(h.a,{style:{color:"#fff"}})})]})]}),Object(v.jsxs)("div",{className:"details",children:[Object(v.jsx)(j.d,{children:a.name}),Object(v.jsxs)(j.d,{children:["From ",Object(x.d)(r)," - To ",Object(x.d)(c)]}),Object(v.jsxs)(j.d,{children:["Booked On: ",Object(x.d)(i)]}),Object(v.jsxs)(j.d,{children:["Amount: Rs. ",s]})]})]})},N=t(302),B=d.a.div(r||(r=Object(s.a)(["\n    margin-top: 20px;\n\n    .grid-container {\n        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n\n        @media(max-width: 375px){\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n        }\n    }\n\n"]))),$=function(n){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),d=Object(o.a)(s,2),b=d[0],p=d[1],j=(new Date).setHours(0,0,0,0),m=n.bookings?n.bookings.filter((function(n){return new Date(n.from)>j})):[],f=n.bookings?n.bookings.filter((function(n){return new Date(n.from)<=j})):[];return m=m.filter((function(n){return n.hotel.name.toLowerCase().includes(a.toString().toLowerCase())})),f=f.filter((function(n){return n.hotel.name.toLowerCase().includes(a.toString().toLowerCase())})),Object(v.jsxs)(B,{children:[Object(v.jsx)(l.a,{query:a,setQuery:r,placeholder:"Search bookings by hotel names..."}),Object(v.jsx)(i.g,{style:{fontSize:"20px",margin:"26px 0"},children:"Upcoming Bookings"}),Object(v.jsx)(N.c,{className:"grid-container",children:b?Object(v.jsx)(u.a,{}):m.map((function(e){return Object(v.jsx)(w,{data:e,setLoading:p,loading:b,setModal:n.setModal},e.id)}))}),0===m.length&&Object(v.jsx)(i.g,{className:"small",style:{textAlign:"center",marginTop:"20px"},children:"No Bookings"}),Object(v.jsx)("br",{}),Object(v.jsx)(i.g,{style:{fontSize:"20px",margin:"26px 0"},children:"Old Bookings"}),Object(v.jsx)(N.c,{className:"grid-container",children:b?Object(v.jsx)(u.a,{}):f.map((function(e){return Object(v.jsx)(w,{data:e,setLoading:p,loading:b,setModal:n.setModal,isOld:!0},e.id)}))}),0===f.length&&Object(v.jsx)(i.g,{className:"small",style:{textAlign:"center",marginTop:"20px"},children:"No Bookings"})]})},M=t(43),D=t(177),P=t(71),C=t(137),z=t(32),I=(t(156),t(304)),S=t.n(I),Y=(t(303),t(157)),H=t(72),L=t(13),A=function(n){var e=n.booking,t=Object(L.o)();return Object(v.jsx)(N.e,{children:Object(v.jsxs)(N.d,{className:"modal-box",children:[Object(v.jsx)(S.a,{className:"close-icon",onClick:function(){return n.setModal({state:!1,param:null,title:""})}}),Object(v.jsx)(N.f,{children:n.title}),Object(v.jsx)("br",{}),Object(v.jsxs)(i.g,{className:"small",children:["Booked By: ",Object(v.jsx)("span",{children:e.bookedBy.name})]}),Object(v.jsxs)(i.g,{className:"small",children:["Username: ",Object(v.jsx)("span",{children:e.bookedBy.username})]}),Object(v.jsx)(Y.a,{interactive:!0,content:Object(x.e)(e.bookedOn),placement:"bottom",children:Object(v.jsxs)(i.g,{className:"small",children:["Booked On: ",Object(v.jsx)("span",{children:Object(x.d)(e.bookedOn)})]})}),Object(v.jsx)("hr",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(N.b,{children:[Object(v.jsxs)("div",{style:{flexBasis:"46%"},children:[Object(v.jsxs)(i.g,{className:"small",children:["Hotel: ",Object(v.jsx)("span",{children:e.hotel.name})]}),Object(v.jsxs)(i.g,{className:"small",children:["Location: ",Object(v.jsx)("span",{children:e.location})]}),Object(v.jsxs)(i.g,{className:"small",children:["Room: ",Object(v.jsx)("span",{children:e.room.name})]}),Object(v.jsx)(Y.a,{interactive:!0,content:Object(x.e)(e.from),placement:"bottom",children:Object(v.jsxs)(i.g,{className:"small",children:["From: ",Object(v.jsx)("span",{children:Object(x.d)(e.from)})]})}),Object(v.jsx)(Y.a,{interactive:!0,content:Object(x.e)(e.to),placement:"bottom",children:Object(v.jsxs)(i.g,{className:"small",children:["To: ",Object(v.jsx)("span",{children:Object(x.d)(e.to)})]})}),Object(v.jsxs)(i.g,{className:"small",children:["Duration:",Object(v.jsxs)("span",{children:[" ",e.days," ",1===e.days?"Day":"Days"]})]})]}),Object(v.jsxs)("div",{style:{flexBasis:"46%"},children:[Object(v.jsxs)(i.g,{className:"small",children:["Rooms:",e.roomNumbers.map((function(n){return Object(v.jsx)("span",{className:"highlight",style:{margin:"4px 2px"},children:n})}))]}),Object(v.jsxs)(i.g,{className:"small",children:["Number of persons: ",Object(v.jsx)("span",{children:e.numOfPeople})]}),Object(v.jsxs)(i.g,{className:"small",children:["Adults: ",Object(v.jsx)("span",{children:e.people.adults})]}),Object(v.jsxs)(i.g,{className:"small",children:["Children: ",Object(v.jsx)("span",{children:e.people.children})]})]})]}),Object(v.jsx)("br",{}),Object(v.jsx)("hr",{}),Object(v.jsx)("br",{}),Object(v.jsxs)(i.g,{className:"small",children:["Room Price: ",Object(v.jsxs)("span",{children:["Rs. ",e.room.price]})]}),Object(v.jsxs)(i.g,{className:"small",children:["Amount ",e.paid?"Paid":"To Be Paid",": ",Object(v.jsxs)("span",{children:["Rs. ",e.amount]})]}),Object(v.jsxs)(i.g,{className:"small",children:["Payment Status:",Object(v.jsxs)("span",{children:[" ",e.paid?"Paid":"Not Paid"]})]}),Object(v.jsxs)(H.b,{children:[Object(v.jsx)(z.a,{children:"View Hotel & Room"}),e.paid?null:Object(v.jsx)(z.a,{onClick:function(){t("/payment/".concat(e.hotel.id,"/").concat(e.room.id,"/1"),{state:e})},children:"Pay Now"})]})]})})};e.default=function(n){var e=n.style,t=n.bookingsData,a=Object(c.useContext)(M.a).setPage;Object(c.useEffect)((function(){a("Bookings")}),[]);var r=Object(c.useState)({state:!1,title:"",param:null,action:""}),s=Object(o.a)(r,2),d=s[0],l=s[1],u=JSON.parse(localStorage.getItem("user")),b=Object(D.b)(f.b,{variables:{id:u.id}}),p=b.data,j=b.loading,m=b.error;if(j)return Object(v.jsx)(P.a,{});if(m)return Object(v.jsx)(C.a,{error:m});var x=t||p.getUserBookings;return Object(v.jsxs)(i.c,{style:e,children:[d.state?Object(v.jsx)(A,{booking:d.param,setModal:l,title:d.title}):null,Object(v.jsx)($,{bookings:x,setModal:l,modal:d})]})}}}]);
//# sourceMappingURL=6.1487bfe9.chunk.js.map