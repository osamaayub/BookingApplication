(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{301:function(e,n,t){"use strict";t.d(n,"d",(function(){return m})),t.d(n,"e",(function(){return h})),t.d(n,"c",(function(){return j})),t.d(n,"f",(function(){return f})),t.d(n,"a",(function(){return g})),t.d(n,"b",(function(){return O}));var o=t(23),a=t(36),s=t(305),r=t(311),i=t.n(r),c=t(62),l=t(312),d=t(313),u=Object(l.a)({apiKey:"AIzaSyA3VHRbj4knFBXK3YVFdsr7xn2MvE1A0_E",authDomain:"hotel-booking-app-2c070.firebaseapp.com",projectId:"hotel-booking-app-2c070",storageBucket:"hotel-booking-app-2c070.appspot.com",messagingSenderId:"308536271440",appId:"1:308536271440:web:cf389c892a5fa653486755"}),p=Object(d.a)(u),b=t(349),m=function(e){return i()(e).format("DD/MM/YYYY")},h=function(e){return i()(e).format("Do MMMM, YYYY")},j=function(e){var n=i()(),t=i()(e).format("YYYY");return n.diff(t,"years")},f=function(){var e=Object(a.a)(Object(o.a)().mark((function e(n,t){var r,i,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return alert("No file found."),e.abrupt("return");case 3:return r=Object(s.d)(p,t),(i=Object(s.e)(r,n)).on("state_changed",(function(e){}),(function(e){c.b.error(e,{autoClose:5500,pauseOnHover:!0})}),(function(){l=Object(s.b)(i.snapshot.ref)})),e.next=8,Promise.resolve(i).then(function(){var e=Object(a.a)(Object(o.a)().mark((function e(n){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(l).then((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(a.a)(Object(o.a)().mark((function e(n,t){var s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&0!==n.length){e.next=3;break}return alert("No file found."),e.abrupt("return");case 3:return s=[],e.next=6,Promise.all(n.map(function(){var e=Object(a.a)(Object(o.a)().mark((function e(n,a){var r,i,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(b.a)(),i="images/rooms/".concat(t.id,"/roomImage-").concat(r),e.next=4,f(n,i);case 4:c=e.sent,s.push({url:c,uuid:r});case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 6:return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),O=function(){var e=Object(a.a)(Object(o.a)().mark((function e(n,t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=Object(a.a)(Object(o.a)().mark((function e(n,a){var r,i;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.uuid,i=Object(s.d)(p,"images/rooms/".concat(t,"/roomImage-").concat(r)),e.next=4,Object(s.a)(i);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},309:function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return c}));var o,a,s=t(12),r=t(60),i=Object(r.a)(o||(o=Object(s.a)(["\nmutation($from: Date!, $to: Date!, $roomNumbers: [Int]!, $paid: Boolean!, $amount: Int!,\n    $bookedBy: ID!, $people: people!, $room: ID!, $hotel: ID!){\n    addBooking(from: $from, to: $to, roomNumbers: $roomNumbers, paid: $paid, amount: $amount, \n        bookedBy: $bookedBy, people: $people, room: $room, hotel: $hotel){\n      id\n      from\n      to\n      bookedBy{\n          name\n      }\n    }\n  }\n"]))),c=Object(r.a)(a||(a=Object(s.a)(["\nmutation($id: ID!){\n    cancelBooking(id: $id){\n      id\n      from\n      to\n      bookedBy{\n          name\n      }\n    }\n  }\n"])))},345:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),s=i(t(0)),r=i(t(109));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=!1,d=!1,u=!1,p=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onScriptLoaded=function(){n.stripeHandler||(n.stripeHandler=StripeCheckout.configure({key:t.props.stripeKey}),t.hasPendingClick&&t.showStripeDialog())},t.onScriptError=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t.hideLoadingDialog(),t.props.onScriptError&&t.props.onScriptError.apply(t,n)},t.onClosed=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t._isMounted&&t.setState({open:!1}),t.props.closed&&t.props.closed.apply(t,n)},t.onOpened=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];t.setState({open:!0}),t.props.opened&&t.props.opened.apply(t,n)},t.getConfig=function(){return["token","image","name","description","amount","locale","currency","panelLabel","zipCode","shippingAddress","billingAddress","email","allowRememberMe","bitcoin","alipay","alipayReusable"].reduce((function(e,n){return o({},e,t.props.hasOwnProperty(n)&&c({},n,t.props[n]))}),{opened:t.onOpened,closed:t.onClosed})},t.onClick=function(){if(!t.props.disabled)if(u)try{throw new Error("Tried to call onClick, but StripeCheckout failed to load")}catch(e){}else n.stripeHandler?t.showStripeDialog():(t.showLoadingDialog(),t.hasPendingClick=!0)},t.handleOnMouseDown=function(){t.setState({buttonActive:!0})},t.handleOnMouseUp=function(){t.setState({buttonActive:!1})},t.state={open:!1,buttonActive:!1},t}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),a(n,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,!d&&!l){l=!0;var n=document.createElement("script");"function"===typeof this.props.onScriptTagCreated&&this.props.onScriptTagCreated(n),n.src="https://checkout.stripe.com/checkout.js",n.async=1,this.loadPromise=function(){var t=!1,o=new Promise((function(t,o){n.onload=function(){d=!0,l=!1,t(),e.onScriptLoaded()},n.onerror=function(n){u=!0,l=!1,o(n),e.onScriptError(n)}}));return{promise:new Promise((function(e,n){o.then((function(){return t?n({isCanceled:!0}):e()})),o.catch((function(e){return n(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}}(),this.loadPromise.promise.then(this.onScriptLoaded).catch(this.onScriptError),document.body.appendChild(n)}}},{key:"componentDidUpdate",value:function(){l||this.updateStripeHandler()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.loadPromise&&this.loadPromise.cancel(),n.stripeHandler&&this.state.open&&n.stripeHandler.close()}},{key:"updateStripeHandler",value:function(){n.stripeHandler&&!this.props.reconfigureOnUpdate||(n.stripeHandler=StripeCheckout.configure({key:this.props.stripeKey}))}},{key:"showLoadingDialog",value:function(){if(this.props.showLoadingDialog){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];this.props.showLoadingDialog.apply(this,n)}}},{key:"hideLoadingDialog",value:function(){if(this.props.hideLoadingDialog){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];this.props.hideLoadingDialog.apply(this,n)}}},{key:"showStripeDialog",value:function(){this.hideLoadingDialog(),n.stripeHandler.open(this.getConfig())}},{key:"renderDefaultStripeButton",value:function(){return s.default.createElement("button",o({},c({},this.props.triggerEvent,this.onClick),{className:this.props.className,onMouseDown:this.handleOnMouseDown,onFocus:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,onMouseOut:this.handleOnMouseUp,onBlur:this.handleOnMouseUp,style:o({},{overflow:"hidden",display:"inline-block",background:"linear-gradient(#28a0e5,#015e94)",border:0,padding:1,textDecoration:"none",borderRadius:5,boxShadow:"0 1px 0 rgba(0,0,0,0.2)",cursor:"pointer",visibility:"visible",userSelect:"none"},this.state.buttonActive&&{background:"#005d93"},this.props.style)}),s.default.createElement("span",{style:o({},{backgroundImage:"linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",color:"#fff",fontWeight:"bold",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",textShadow:"0 -1px 0 rgba(0,0,0,0.25)",borderRadius:4},this.state.buttonActive&&{color:"#eee",boxShadow:"inset 0 1px 0 rgba(0,0,0,0.1)",backgroundImage:"linear-gradient(#008cdd,#008cdd 85%,#239adf)"},this.props.textStyle)},this.props.label))}},{key:"renderDisabledButton",value:function(){return s.default.createElement("button",{disabled:!0,style:{background:"rgba(0,0,0,0.2)",overflow:"hidden",display:"inline-block",border:0,padding:1,textDecoration:"none",borderRadius:5,userSelect:"none"}},s.default.createElement("span",{style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",borderRadius:4,color:"#999",background:"#f8f9fa",textShadow:"0 1px 0 rgba(255,255,255,0.5)"}},this.props.label))}},{key:"render",value:function(){!0!==this.props.desktopShowModal||this.state.open?!1===this.props.desktopShowModal&&this.state.open&&n.stripeHandler.close():this.onClick();var e=this.props.ComponentClass;return this.props.children?s.default.createElement(e,o({},c({},this.props.triggerEvent,this.onClick),{children:this.props.children})):this.props.disabled?this.renderDisabledButton():this.renderDefaultStripeButton()}}]),n}(s.default.Component);p.defaultProps={className:"StripeCheckout",label:"Pay With Card",locale:"auto",ComponentClass:"span",reconfigureOnUpdate:!1,triggerEvent:"onClick"},p.propTypes={desktopShowModal:r.default.bool,triggerEvent:r.default.oneOf(["onClick","onTouchTap","onTouchStart"]),label:r.default.string,style:r.default.object,textStyle:r.default.object,disabled:r.default.bool,ComponentClass:r.default.string,showLoadingDialog:r.default.func,hideLoadingDialog:r.default.func,onScriptError:r.default.func,onScriptTagCreated:r.default.func,reconfigureOnUpdate:r.default.bool,stripeKey:r.default.string.isRequired,token:r.default.func.isRequired,name:r.default.string,description:r.default.string,image:r.default.string,amount:r.default.number,locale:r.default.oneOf(["auto","zh","da","nl","en","fr","de","it","ja","no","es","sv"]),currency:r.default.oneOf(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","MAD","MDL","MGA","MKD","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"]),panelLabel:r.default.string,zipCode:r.default.bool,billingAddress:r.default.bool,shippingAddress:r.default.bool,email:r.default.string,allowRememberMe:r.default.bool,bitcoin:r.default.bool,alipay:r.default.oneOf(["auto",!0,!1]),alipayReusable:r.default.bool,opened:r.default.func,closed:r.default.func},p._isMounted=!1,n.default=p},348:function(e,n,t){"use strict";t.r(n);var o,a,s,r,i,c,l=t(0),d=t(20),u=t(43),p=t(12),b=t(18),m=t(1),h=b.a.div(o||(o=Object(p.a)(["\n    display: flex;\n    justify-content: space-between;\n    max-width: 600px;\n    margin: auto;\n    @media(max-width: 700px){\n        max-width: calc(100vw - 140px)\n    }\n"]))),j=b.a.div(a||(a=Object(p.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    margin: 0 4px;\n    &.cur{\n        div{\n            background: #00d892;\n        }\n    }\n    div{\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        background: #b0b0b0;\n        margin-bottom: 18px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #fff;\n    }\n    p{\n        position: absolute;\n        top: 120%;\n        white-space: nowrap;\n        color: grey;\n    }\n"]))),f=b.a.div(s||(s=Object(p.a)(["\n    margin-top: 13px;\n    height: 4px;\n    width: 100%;\n    background: #b0b0b0;\n    &.cur{\n        background: #00d892;\n    }\n"]))),g=function(e){var n=e.step;return Object(m.jsxs)(h,{children:[Object(m.jsxs)(j,{className:"".concat(n>=1?"cur":""),children:[Object(m.jsx)("div",{children:"1"}),Object(m.jsx)(d.g,{className:"small",children:"Curtomer Info"})]}),Object(m.jsx)(f,{className:"".concat(n>=2?"cur":"")}),Object(m.jsxs)(j,{className:"".concat(n>=2?"cur":""),children:[Object(m.jsx)("div",{children:"2"}),Object(m.jsx)(d.g,{className:"small",children:"Payment"})]}),Object(m.jsx)(f,{className:"".concat(n>=3?"cur":"")}),Object(m.jsxs)(j,{className:"".concat(n>=3?"cur":""),children:[Object(m.jsx)("div",{children:"3"}),Object(m.jsx)(d.g,{className:"small",children:"Booking Confirmed"})]})]})},O=t(301),x=t(13),y=b.a.div(r||(r=Object(p.a)(["\n    display: flex;\n    max-width: 1200px;\n    margin: 80px auto 10px auto;\n    border: 0.5px solid #d8d8d8;\n    &.buttons{\n        justify-content: space-between;\n        border: 0;\n        margin-top: 10px;\n        @media(max-width: 576px){\n            flex-direction: row;\n        }\n    }\n    .section{\n        margin: 16px;\n        :first-child{\n            flex-basis: 60%;\n            border-right: 0.5px solid #d8d8d8;\n            @media(max-width: 576px){\n                border-right: 0\n            }\n        }\n        :last-child{\n            flex-basis: 40%\n        }\n    }\n    @media(max-width: 576px){\n        flex-direction: column;\n        button{\n            width: fit-content;\n            margin-bottom: 16px;\n        }\n    }\n"]))),k=b.a.div(i||(i=Object(p.a)(["\n    max-width: 1200px;\n    margin: 80px auto 10px auto;\n    border: 0.5px solid #d8d8d8;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 20px;\n"]))),v=function(e){var n=e.user,t=e.room,o=e.booking,a=Object(x.o)();return console.log(e),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(y,{children:[Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Customer Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Name: ",Object(m.jsx)("span",{children:n.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Email: ",Object(m.jsx)("span",{children:n.email})]}),Object(m.jsxs)(d.g,{className:"small",children:["Age: ",Object(m.jsx)("span",{children:Object(O.c)(n.dob)})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total: ",Object(m.jsxs)("span",{children:[o.people.adults+o.people.children," Persons"]})]})]}),Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Booking Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Hotel: ",Object(m.jsx)("span",{children:t.hotel.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Room: ",Object(m.jsx)("span",{children:t.name})]}),Object(m.jsxs)(d.g,{className:"small",style:{margin:"-10px 0 10px 0"},children:["Room Number(s):",o.roomNumbers.map((function(e){return Object(m.jsx)("span",{className:"highlight",style:{margin:"4px 2px"},children:e})}))]}),Object(m.jsxs)(d.g,{className:"small",children:["Price (Each room): ",Object(m.jsxs)("span",{children:["Rs. ",t.price]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount]})]})]})]}),Object(m.jsxs)(y,{className:"buttons",children:[Object(m.jsx)(d.a,{onClick:function(){return a("/hotel/".concat(t.hotel.id),{state:o})},children:"Go Back"}),Object(m.jsx)(d.a,{onClick:function(){return a("/payment/".concat(t.hotel.id,"/").concat(t.id,"/2"),{state:o})},children:"Confirm"})]})]})},N=t(177),D=t(165),S=t(17),C=t(292),w=t(309),R=t(62),B=t(106),P=t(345),A=t.n(P),E=t(60),M=Object(E.a)(c||(c=Object(p.a)(["\nmutation($tokenId: ID!, $bookingId: ID!, $bookedBy: ID!){\n    payAmount(tokenId: $tokenId, bookingId: $bookingId, bookedBy: $bookedBy){\n      id\n      from\n      to\n      bookedBy{\n          name\n      }\n    }\n  }\n"]))),I=function(e){var n=e.user,t=e.room,o=e.booking,a=e.bookingExists,s=Object(x.o)(),r=Object(C.a)(w.a),i=Object(S.a)(r,1)[0],c=Object(C.a)(M),u=Object(S.a)(c,1)[0],p=Object(l.useState)(!1),b=Object(S.a)(p,2),h=b[0],j=b[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(y,{children:h?Object(m.jsx)(B.a,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Customer Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Name: ",Object(m.jsx)("span",{children:n.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Email: ",Object(m.jsx)("span",{children:n.email})]}),Object(m.jsxs)(d.g,{className:"small",children:["Age: ",Object(m.jsx)("span",{children:Object(O.c)(n.dob)})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total: ",Object(m.jsx)("span",{children:o.people.adults+o.people.children})]}),Object(m.jsx)(d.g,{style:{marginTop:"20px"},children:"Booking Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Hotel: ",Object(m.jsx)("span",{children:t.hotel.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Room: ",Object(m.jsx)("span",{children:t.name})]}),Object(m.jsxs)(d.g,{className:"small",style:{margin:"-10px 0 10px 0"},children:["Room Number(s):",o.roomNumbers.map((function(e){return Object(m.jsx)("span",{className:"highlight",style:{margin:"4px 2px"},children:e})}))]}),Object(m.jsxs)(d.g,{className:"small",children:["Price (Each room): ",Object(m.jsxs)("span",{children:["Rs. ",t.price]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount]})]})]}),Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Payment Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Room(s) Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Tax: ",Object(m.jsxs)("span",{children:["Rs. ",20]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total Cost:",Object(m.jsxs)("span",{children:["Rs. ",o.amount+20]})]}),Object(m.jsx)(A.a,{token:function(e){j(!0),a?u({variables:{tokenId:e.id,bookingId:o.id,bookedBy:o.bookedBy.id}}).then((function(e){j(!1);var n=o;n.id=e.data.payAmount.id,n.paid=!0,s("/payment/".concat(t.hotel.id,"/").concat(t.id,"/3"),{state:n})})).catch((function(e){j(!1),R.b.error(e.message,{autoClose:5500,pauseOnHover:!0})})):i({variables:{from:o.from,to:o.to,roomNumbers:o.roomNumbers,bookedBy:o.bookedBy,paid:o.paid,amount:o.amount+20,people:o.people,room:o.room,hotel:o.hotel}}).then((function(n){u({variables:{tokenId:e.id,bookingId:n.data.addBooking.id,bookedBy:o.bookedBy}}).then((function(e){j(!1);var n=o;n.id=e.data.payAmount.id,n.paid=!0,s("/payment/".concat(t.hotel.id,"/").concat(t.id,"/3"),{state:n})})).catch((function(e){j(!1),R.b.error(e.message,{autoClose:5500,pauseOnHover:!0})}))})).catch((function(e){j(!1),R.b.error(e.message,{autoClose:5500,pauseOnHover:!0})}))},stripeKey:"pk_test_51Hr13fE7BvSkBO4prE35EeVzyGVKfQCPfpfcOZZkSLfa4jfONQeEOrd9A4wFIERlRXuVpBu3NYVm1YwCrFfY0gs400dAaCrTp0",name:"",currency:"USD",amount:100*(o.amount+20)}),Object(m.jsx)(d.g,{className:"small",style:{marginTop:"16px",color:"grey"},children:"*You can also pay later"})]})]})}),Object(m.jsxs)(y,{className:"buttons",children:[Object(m.jsx)(d.a,{onClick:function(){return s("/payment/".concat(t.hotel.id,"/").concat(t.id,"/1"),{state:o})},children:"Go Back"}),Object(m.jsx)(d.a,{onClick:function(){return j(!0),void(a?s("/bookings"):i({variables:{from:o.from,to:o.to,roomNumbers:o.roomNumbers,bookedBy:o.bookedBy,paid:o.paid,amount:o.amount+20,people:o.people,room:o.room,hotel:o.hotel}}).then((function(e){var n=o;n.id=e.data.addBooking.id,s("/payment/".concat(t.hotel.id,"/").concat(t.id,"/3"),{state:n})})).catch((function(e){j(!1),R.b.error(e,{autoClose:5500,pauseOnHover:!0})})))},disabled:h,children:"Pay Later"})]})]})},T=function(e){var n=e.user,t=e.room,o=e.booking,a=Object(x.o)();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(k,{children:[Object(m.jsx)("img",{src:"https://img.icons8.com/fluency/48/000000/ok.png",alt:"/",style:{marginRight:"10px"}}),Object(m.jsx)(d.g,{style:{margin:"0"},children:"Booking Confirmed"})]}),Object(m.jsxs)(y,{style:{marginTop:"20px"},children:[Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Customer Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Name: ",Object(m.jsx)("span",{children:n.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Email: ",Object(m.jsx)("span",{children:n.email})]}),Object(m.jsxs)(d.g,{className:"small",children:["Age: ",Object(m.jsx)("span",{children:Object(O.c)(n.dob)})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total: ",Object(m.jsx)("span",{children:o.people.adults+o.people.children})]}),Object(m.jsx)(d.g,{style:{marginTop:"20px"},children:"Booking Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Hotel: ",Object(m.jsx)("span",{children:t.hotel.name})]}),Object(m.jsxs)(d.g,{className:"small",children:["Room: ",Object(m.jsx)("span",{children:t.name})]}),Object(m.jsxs)(d.g,{className:"small",style:{margin:"-10px 0 10px 0"},children:["Room Number(s):",o.roomNumbers.map((function(e){return Object(m.jsx)("span",{className:"highlight",style:{margin:"4px 2px"},children:e})}))]}),Object(m.jsxs)(d.g,{className:"small",children:["Price (Each room): ",Object(m.jsxs)("span",{children:["Rs. ",t.price]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount]})]})]}),Object(m.jsxs)("div",{className:"section",children:[Object(m.jsx)(d.g,{children:"Payment Info"}),Object(m.jsxs)(d.g,{className:"small",children:["Room(s) Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Tax: ",Object(m.jsxs)("span",{children:["Rs. ",20]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Total Cost: ",Object(m.jsxs)("span",{children:["Rs. ",o.amount+20]})]}),Object(m.jsxs)(d.g,{className:"small",children:["Payment Status: ",Object(m.jsx)("span",{children:o.paid?"Paid":"Not Paid"})]})]})]}),Object(m.jsx)(y,{className:"buttons",children:Object(m.jsx)(d.a,{onClick:function(){return a("/bookings")},style:{marginLeft:"auto"},children:"Your Bookings"})})]})},L=t(71),H=t(137);n.default=function(){var e=Object(l.useContext)(u.a).setPage;Object(l.useEffect)((function(){e("Payment")}),[]);var n=Object(x.q)(),t=n.roomId,o=n.step,a=Object(x.m)(),s=Object(N.b)(D.b,{variables:{id:t}}),r=s.data,i=s.loading,c=s.error;if(i)return Object(m.jsx)(L.a,{});if(c)return Object(m.jsx)(H.a,{error:c});if(!a.state)return Object(m.jsx)(x.a,{to:"/"});var p=JSON.parse(localStorage.getItem("user")),b=r.getRoom,h=a.state,j=void 0!==h.id;return h?Object(m.jsxs)(d.c,{children:[Object(m.jsx)(g,{step:o}),"1"===o&&Object(m.jsx)(v,{user:p,room:b,booking:h,bookingExists:j}),"2"===o&&Object(m.jsx)(I,{user:p,room:b,booking:h,bookingExists:j}),"3"===o&&Object(m.jsx)(T,{user:p,room:b,booking:h,bookingExists:j})]}):Object(m.jsx)(H.a,{error:{message:"Booking info not available."}})}}}]);
//# sourceMappingURL=8.dc821111.chunk.js.map